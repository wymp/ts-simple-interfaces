<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@wymp/ts-simple-interfaces</title><meta name="description" content="Documentation for @wymp/ts-simple-interfaces"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@wymp/ts-simple-interfaces</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@wymp/ts-simple-interfaces</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#simple-interfaces-for-typescript" id="simple-interfaces-for-typescript" style="color: inherit; text-decoration: none;">
  <h1>Simple Interfaces for Typescript</h1>
</a>
<p><strong>NOTE:</strong> This library is experimental right now and in active alpha development. While you may
feel free to use it, it is expected to change considerably.</p>
<p><strong>NOTE: As of v0.5.0 this project is now mantained by <a href="https://github.com/wymp">Wymp</a> and the
package is published on github. Please use <code>@wymp/ts-simple-interfaces</code> for future versions of
this package. (This will require setting up an <code>.npmrc</code> file at some level with the following line:
<code>@wymp:registry=https://npm.pkg.github.com/wymp</code>.)</strong></p>

<a href="#tldr" id="tldr" style="color: inherit; text-decoration: none;">
  <h2>TL;DR</h2>
</a>
<p>The &quot;Simple&quot; suite of packages should be considered a collection of interfaces (defined in this
package) along with a collection of concrete implementations (defined in other packages prefaced
with <code>simple-</code>) that allow you to write code that is highly portable and highly testable.</p>
<p>The idea is that your code should always use the <em>simple interfaces,</em> for function argument types,
and that you should then pass in the concrete implementations that you wish to
use.</p>
<p>For example, your application may require an HTTP client, like Axios or Request Promise Native.
To set your application up, you would type the variable holding the client as
<code>SimpleHttpClientInterface</code> and then set it to a concrete implementation, such as
<code>SimpleHttpClientAxios</code> from the
<a href="../ts-simple-http-client-axios"><code>simple-http-client-axios</code> package</a>:</p>
<pre><code class="language-ts"><span class="hl-0">// src/MyClient.ts</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">SimpleHttpClientInterface</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;ts-simple-interfaces&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">SomeData</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;./Types&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">export</span><span class="hl-2"> </span><span class="hl-5">class</span><span class="hl-2"> </span><span class="hl-6">MyClient</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">public</span><span class="hl-2"> </span><span class="hl-5">constructor</span><span class="hl-2">(</span><span class="hl-5">protected</span><span class="hl-2"> </span><span class="hl-3">httpClient</span><span class="hl-2">: </span><span class="hl-6">SimpleHttpClientInterface</span><span class="hl-2">) { }</span><br/><br/><span class="hl-2">  </span><span class="hl-5">public</span><span class="hl-2"> </span><span class="hl-7">getSomeData</span><span class="hl-2">() {</span><br/><span class="hl-2">    </span><span class="hl-1">return</span><span class="hl-2"> </span><span class="hl-5">this</span><span class="hl-2">.</span><span class="hl-3">httpClient</span><span class="hl-2">.</span><span class="hl-7">request</span><span class="hl-2">&lt;</span><span class="hl-6">SomeData</span><span class="hl-2">&gt;({</span><br/><span class="hl-2">      </span><span class="hl-0">//...</span><br/><span class="hl-2">    });</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// --------------------------------------------------------------------</span><br/><br/><span class="hl-0">// src/index.ts</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">MyClient</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;./MyClient&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">SimpleHttpClientAxios</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;simple-http-client-axios&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-8">axios</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">SimpleHttpClientAxios</span><span class="hl-2">();</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-8">myClient</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">MyClient</span><span class="hl-2">(</span><span class="hl-3">axios</span><span class="hl-2">);</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-8">data</span><span class="hl-2"> = </span><span class="hl-3">myClient</span><span class="hl-2">.</span><span class="hl-7">getSomeData</span><span class="hl-2">();</span><br/><span class="hl-0">// ....</span>
</code></pre>
<p>Doing this means that if for any reason in the future it Axios goes out of production or becomes
problematic, you can easily switch to a different implementation with minimal adjustments.</p>
<p>Note that the idea is not necessarily that there be <em>no</em> adjustments. Individual implementations
have varying features that you may want to use. However, sticking to Simple-conformant
implementations not only minimizes the adjustments you have to make when migrating, but it also
increases your options for testing, as other people can focus on building robust, widely
applicable test implementations that conform to the general Simple interfaces and can be dropped in
with no modifications, or at least only minor ones.</p>

<a href="#longer-overview" id="longer-overview" style="color: inherit; text-decoration: none;">
  <h2>Longer Overview</h2>
</a>
<p>This library attempts to define a set of simplified interfaces for typescript that are compatible
with common tools in the ecosystem. Most of these tools are I/O-based, such as pub/subs (amqp),
relational databases (mysql, postgres), key-value stores (redis), and loggers (winston), but
technically any complex tool is fair game for a simplified interface.</p>
<p>The problem is that many of these tools have unnecessarily complex native interfaces that make
them problematic for testing and portability. For example, Winston is a wonderful logger, but
its <code>LoggerInterface</code> defines a bunch of methods that are not very useful to the average user,
and furthermore extends <code>NodeJSStream.Transport</code>, yielding a final interface that defines over
40 methods that have little to do with logging messages. Thus, incorporating these interfaces
into your code unnecessarily expands the contracts that your code uses, making your applications
less flexible, more difficult to test, and more difficult to migrate to new technologies.</p>
<p>Another issue is that Winston&#39;s <code>LoggerInterface</code> is defined in the library itself, meaning that
if you want to use that <code>LoggerInterface</code>, you have to depend on the whole Winston package. This
isn&#39;t technically a huge deal, but it also tends to hamper the responsible specification of
general interfaces that are independent of any single project.</p>

<a href="#toc-for-simple-suite-of-packages" id="toc-for-simple-suite-of-packages" style="color: inherit; text-decoration: none;">
  <h2>TOC for Simple Suite of Packages</h2>
</a>
<p>As mentioned in the TL;DR, the &quot;simple&quot; concept is actually a collection of repositories/packages.
For each interface defined, the goal is to create one or more &quot;official&quot; concrete implementations
based on current popular libraries.</p>
<blockquote>
<p>Because the Simple suite is still very much a work in progress, very few concrete implementations
have been defined. However, as the interfaces stabilize and are used in production environments,
the hope is to deliver more. Feel free to let me know about any concrete implementations that
spring up in the wild....</p>
</blockquote>
<p>Following is a list of implementations by interface:</p>

<a href="#simplehttpclientinterface" id="simplehttpclientinterface" style="color: inherit; text-decoration: none;">
  <h3><code>SimpleHttpClientInterface</code></h3>
</a>
<ul>
<li><a href="../ts-simple-http-client-rpn"><code>simple-http-client-rpn</code></a></li>
<li><a href="../ts-simple-http-client-axios"><code>simple-http-client-axios</code></a></li>
</ul>

<a href="#simplehttprequesthandlerinterface" id="simplehttprequesthandlerinterface" style="color: inherit; text-decoration: none;">
  <h3><code>SimpleHttpRequestHandlerInterface</code></h3>
</a>
<ul>
<li><a href="../ts-simple-http-server-express"><code>simple-http-server-express</code></a></li>
</ul>

<a href="#simpleloggerinterface" id="simpleloggerinterface" style="color: inherit; text-decoration: none;">
  <h3><code>SimpleLoggerInterface</code></h3>
</a>
<ul>
<li><a href="../ts-simple-logger-winston"><code>simple-logger-winston</code></a></li>
</ul>

<a href="#simplepubsubinterface" id="simplepubsubinterface" style="color: inherit; text-decoration: none;">
  <h3><code>SimplePubSubInterface</code></h3>
</a>
<ul>
<li><a href="../ts-simple-pubsub-amqp"><code>simple-pubsub-amqp</code></a></li>
</ul>

<a href="#simplesqldbinterface" id="simplesqldbinterface" style="color: inherit; text-decoration: none;">
  <h3><code>SimpleSqlDbInterface</code></h3>
</a>
<ul>
<li><a href="../ts-simple-db-mysql"><code>simple-db-mysql</code></a></li>
</ul>

<a href="#testing" id="testing" style="color: inherit; text-decoration: none;">
  <h2>Testing</h2>
</a>
<p>One of the advantages of referencing these interfaces in your code is that you can use potentially
powerful pre-built testing mocks/spies/stubs that conform to them. At the time of this writing,
these are being developed <a href="../ts-simple-interfaces-testing">here</a>.</p>
<p>For example, you can instantiate a <code>SimpleMockSqlDb</code> that implements <code>SimpleSqlDbInterface</code> and
gives you the ability to easily analyze query requests and define responses.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>To use this library, just list it as a dependency[1] and then define classes that implement
these interfaces. For example:</p>
<pre><code class="language-ts"><span class="hl-0">// src/MyDatasource.ts</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">SimpleDatasourceInterface</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;ts-simple-interfaces&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-1">export</span><span class="hl-2"> </span><span class="hl-5">class</span><span class="hl-2"> </span><span class="hl-6">MyDatasource</span><span class="hl-2"> </span><span class="hl-5">implements</span><span class="hl-2"> </span><span class="hl-6">SimpleDatasourceInterface</span><span class="hl-2"> {</span><br/><span class="hl-2">  ....</span><br/><span class="hl-2">}</span>
</code></pre>

<a href="#api" id="api" style="color: inherit; text-decoration: none;">
  <h2>API</h2>
</a>
<p>The best way to understand the API is by just looking at the declarations file
<a href="https://github.com/wymp/ts-simple-interfaces/blob/current/packages/ts-simple-interfaces/src/index.ts">here</a>.</p>

<a href="#footnotes" id="footnotes" style="color: inherit; text-decoration: none;">
  <h2>Footnotes</h2>
</a>
<p>[1] Note that this library should be included as a proper dependency, not a dev dependency,
because it may define enums that actually compile down to javascript that your project uses
at runtime.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class="label tsd-is-external"><span>Internals</span></li><li class="label tsd-is-external"><span>Externals</span></li><li class=" tsd-kind-namespace tsd-is-external"><a href="modules/Errors.html">Errors</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="modules.html#CharacterEncodings" class="tsd-kind-icon">Character<wbr/>Encodings</a></li><li class="tsd-kind-interface"><a href="interfaces/BufferLike.html" class="tsd-kind-icon">Buffer<wbr/>Like</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimplePublisherInterface.html" class="tsd-kind-icon">Simple<wbr/>Publisher<wbr/>Interface</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimpleSubscriberInterface.html" class="tsd-kind-icon">Simple<wbr/>Subscriber<wbr/>Interface</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimplePubSubMessageInterface.html" class="tsd-kind-icon">Simple<wbr/>Pub<wbr/>Sub<wbr/>Message<wbr/>Interface</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimplePubSubInterface.html" class="tsd-kind-icon">Simple<wbr/>Pub<wbr/>Sub<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleSubmittedEvent.html" class="tsd-kind-icon">Simple<wbr/>Submitted<wbr/>Event</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleEvent.html" class="tsd-kind-icon">Simple<wbr/>Event</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleSubmittedTask.html" class="tsd-kind-icon">Simple<wbr/>Submitted<wbr/>Task</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleTask.html" class="tsd-kind-icon">Simple<wbr/>Task</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SimpleMessage" class="tsd-kind-icon">Simple<wbr/>Message</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleDatasourceInterface.html" class="tsd-kind-icon">Simple<wbr/>Datasource<wbr/>Interface</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimpleDatasetInterface.html" class="tsd-kind-icon">Simple<wbr/>Dataset<wbr/>Interface</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SqlPrimitive" class="tsd-kind-icon">Sql<wbr/>Primitive</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SqlValue" class="tsd-kind-icon">Sql<wbr/>Value</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleSqlDbInterface.html" class="tsd-kind-icon">Simple<wbr/>Sql<wbr/>Db<wbr/>Interface</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimpleSqlResponseInterface.html" class="tsd-kind-icon">Simple<wbr/>Sql<wbr/>Response<wbr/>Interface</a></li><li class="tsd-kind-type-alias"><a href="modules.html#HttpMethods" class="tsd-kind-icon">Http<wbr/>Methods</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpClientRequestConfig.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Client<wbr/>Request<wbr/>Config</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/SimpleHttpClientResponseInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Client<wbr/>Response<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpClientInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Client<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpServerRequestInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Request<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpServerResponseInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Response<wbr/>Interface</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SimpleHttpServerNextFunction" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Next<wbr/>Function</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpServerMiddleware.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Middleware</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpServerErrorHandler.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Error<wbr/>Handler</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpRequestHandlerBasicInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Request<wbr/>Handler<wbr/>Basic<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpRequestHandlerInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Request<wbr/>Handler<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleHttpServerInterface.html" class="tsd-kind-icon">Simple<wbr/>Http<wbr/>Server<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleLogLevels.html" class="tsd-kind-icon">Simple<wbr/>Log<wbr/>Levels</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SimpleLogMethod" class="tsd-kind-icon">Simple<wbr/>Log<wbr/>Method</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SimpleLeveledLogMethod" class="tsd-kind-icon">Simple<wbr/>Leveled<wbr/>Log<wbr/>Method</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleLoggerInterface.html" class="tsd-kind-icon">Simple<wbr/>Logger<wbr/>Interface</a></li><li class="tsd-kind-interface"><a href="interfaces/SimpleLoggerConsumerInterface.html" class="tsd-kind-icon">Simple<wbr/>Logger<wbr/>Consumer<wbr/>Interface</a></li><li class="tsd-kind-class"><a href="classes/TaggedLogger.html" class="tsd-kind-icon">Tagged<wbr/>Logger</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>